<!DOCTYPE html>
<html>
  <head>
    <title>Βήμα 4</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/index.css">
    
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>

  </head>

  <body>

    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-primary" id="sideNav">

        <a class="navbar-brand" href="../index.html">
             <span>Learn Spring</span>
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false">
                <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="spring.html">Spring</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="spring-container.html">Spring IoC Container</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="spring-beans.html">Spring Beans</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="dependency-injection.html">Dependency Injection</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="annotations.html">Annotations</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="spring-boot.html">Spring Boot</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="spring-mvc.html">Spring MVC</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="rest-api.html">REST API</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="step2.html">Βημα 2</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="step3.html">Βημα 3</a>
                </li>    
                <li class="nav-item">
                    <a class="nav-link" href="step4.html">Βημα 4</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="step5.html">Βημα 5</a>
                </li>  
                <li class="nav-item">
                    <a class="nav-link" href="step6.html">Βημα 6</a>
                </li>

            </ul>
        </div>
    </nav>

    <div class="container-fluid content">

        <h1 class="text-center">Βημα 4 : Δημιουργια βασης δεδομενων PostgreSQL στο Heroku</h1>

        <section class="create-addon">
            <h5 class="mt-4">Δημουργία add-on</h5>

            <ol>
                <li>Κάνουμε <a href="https://id.heroku.com/login">στο λογαριασμό μας στο Heroku</a>.</li>
                <li>Επιλέγουμε την εφαρμογή <strong>springeshop</strong> από την λίστα των εφαρμογών</li>
                <li>Πατάμε στην καρτέλα <strong>Resources</strong></li>
                <li>Κάτω από το <strong>Add-ons</strong>, πληκτρολογούμε <strong>Heroku Postgres</strong> στο πεδίο αναζήτησης και κάνουμε κλικ</li>
                <li>Στο Popup παράθυρο που εμφανίζεται, πατάμε <strong>Provision</strong></li>
            </ol>
        </section>

        <section class="postgres">
            <h5 class="mt-4">PostgreSQL</h5>

            <ol>
                <li>Πρέπει, να καταβέσουμε την <a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads">PostgreSQL</a></li>
                <li>Επιλέγουμε την έκδοση <strong>PostgreSQL 10.4</strong>, το λειτουργικό σύστημα και πάταμε <strong>Download Now</strong>.</li>
                <li>Αφού κατεβεί, κάνουμε διπλό κλικ στο αρχείο <strong>postgresql-10.4-1-windows-x64.exe</strong></li>
                <li>Στη καρτέλα <strong>Select Components</strong>, το <strong>pgAdmin 4</strong> πρέπει να είναι επιλεγμένο</li>
                <li>Στη καρτέλα <strong>Password</strong>, ζητάει κωδικό για την βάση στο localhost και όχι στο Heroku</li>
            </ol>
        </section>
        
        <section class="heroku-connection">

                <h5 class="mt-4">Απομακρυσμένη σύνδεση στο Heroku</h5>

                <ol>
                    <li>Αφού κάνουμε <strong>login</strong> στο Heroku, κάνουμε κλικ στην εφαρμογή <strong>springeshop</strong></li>
                    <li>Κάνουμε κλικ στην καρτέλα <strong>Resources</strong> και μετά στο <strong>Heroku Postgres :: Database</strong>, που βρίσκεται κάτω από τα <strong>Add-ons</strong></li>
                    <li>Στη καρτέλα <strong>Settings</strong>, πατάμε <strong>View Credentials</strong> στην ενότητα <strong>Database Credentials</strong> 
                        και εμφανίζονται τα στοιχεία της βάσης</li>

                    <li>Συγκεκριμένα έχει το <strong>όνομα του Host</strong>, το <strong>όνομα της βάσης</strong>, το <strong>username</strong> , 
                        το <strong>password</strong>  και το <strong>port</strong></li>

                    <li>Ανοίγουμε το  directory <strong>C:\Program Files\PostgreSQL\10\pgAdmin 4\bin</strong> και κάνουμε διπλό κλικ στο <strong>pgAdmin4.exe</strong> </li>
                    <li>Ανοίγει μια καρτέλα στο browser στο <strong>http://127.0.0.1:49814/browser/</strong></li>
                    <li>Στη στήλη <strong>Browser</strong>, κάνουμε δεξί κλικ στο <strong>Servers -> Create -> Server..</strong></li>
                    <li>Στη καρτέλα <strong>General</strong>, δίνουμε όνομα <strong>heroku_server</strong> </li>
                    <li>Στη καρτέλα <strong>Connection</strong>, συμπληρώνουμε το <strong>Host name/address</strong>, 
                        <strong>Port</strong>, <strong>Maintenance database</strong>, <strong>Username</strong> και 
                        <strong>Password</strong>, από τα στοιχεία της βάσης στο Heroku
                    </li>
                    <li>Αφού τα συμπληρώσουμε, κάνουμε κλικ στο <strong>Password</strong> και πατάμε <strong>Save</strong></li>
                    <li>Άμα κάνουμε κλικ στο server, βλέπουμε ότι έχει πόλλες βάσεις, εκτός από τη δική μας</li>
                    <li>Για να φαίνεται μόνο η δική μας βάση, αρχικά <strong>αποσυνδεόμαστε</strong> από το Server, εάν είμαστε συνδεδεμένοι,
                        κάνοντας δεξί κλικ στο <strong>heroku_server -> Disconnect Server</strong>
                    </li>
                    <li>Μετά κάνουμε πάλι δεξί κλικ στο <strong>heroku_server -> Properties</strong></li>
                    <li>Στη καρτέλα <strong>Advanced</strong> , πληκτρολογούμε το <strong>όνομα της βάσης</strong> στο πεδίο <strong>DB restriction</strong> και πατάμε <strong>Save</strong>. Τώρα
                        θα πρέπει, εμφανίζεται μόνο η δικιά μας βάση.
                    </li>
                </ol>

        </section>
    </div>

  </body>
</html>
