<!DOCTYPE html>
<html>
  <head>
    <title>Δημιουργία controller, repositories και services για την εισαγωγή προϊόντων</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/index.css">
    
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
  </head>

  <body>

     <nav class="navbar navbar-expand-md fixed-top" id="mainNav">

        <div class="container">
            <a class="navbar-brand" href="../index.html">SpringTutorial</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false">
                <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ml-5">
                <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbarSpring" data-toggle="dropdown">Spring</a>
                          <div class="dropdown-menu">
                              <a class="dropdown-item" href="spring.html">What is Spring</a>
                              <a class="dropdown-item" href="spring-container.html">Spring IoC Container</a>
                              <a class="dropdown-item" href="spring-beans.html">Spring Beans</a>
                              <a class="dropdown-item" href="dependency-injection.html">Dependency Injection</a>
                              <a class="dropdown-item" href="annotations.html">Annotations</a>
                              <a class="dropdown-item" href="spring-boot.html">Spring Boot</a>
                              <a class="dropdown-item" href="spring-mvc.html">Spring Mvc</a>
                              <a class="dropdown-item" href="spring-security.html">Spring Security</a>
                              <a class="dropdown-item" href="rest-api.html">Rest API</a>
                              <a class="dropdown-item" href="application-properties.html">Application Properties</a>
                            </div>
                      </li>
                      <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarJpa" data-toggle="dropdown">JPA</a>
                            <div class="dropdown-menu">
                              <a class="dropdown-item" href="jpa.html">JPA</a>
                              <a class="dropdown-item" href="spring-data-jpa.html">Spring Data Jpa</a>
                            </div>
                      </li>
                      <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbarSetup" data-toggle="dropdown">Setup εφαρμογης</a>
                          <div class="dropdown-menu">
                              <a class="dropdown-item" href="app-architecture.html">Αρχιτεκτονική εφαρμογής</a>
                              <a class="dropdown-item" href="spring-tool-suite.html">Spring Tool Suite</a>
                              <a class="dropdown-item" href="heroku.html">Heroku</a>
                              <a class="dropdown-item" href="postgresql.html">Postgres</a>
                              <a class="dropdown-item" href="amazon-s3.html">Amazon S3</a>
                              <a class="dropdown-item" href="angular.html">Angular</a>
                              <a class="dropdown-item" href="create-frontend.html">Δημιουργία Frontend</a> 
                              <a class="dropdown-item" href="visual-studio-code.html">Visual Studio Code</a>
                            </div>
                      </li>
                      <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarCreateApp" data-toggle="dropdown">Κώδικας εφαρμογης</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="jpa-configuration.html">Ρύθμιση βάσης δεδομένων και JPA</a>
                            <a class="dropdown-item" href="amazons3-configuration.html">Ρύθμιση Amazon S3</a>
                            <a class="dropdown-item" href="upload-images.html">Ανέβασμα εικόνων στο Amazon S3</a>
                        </div>
                      </li>
            </ul>
        </div>
      </div>
   
    </nav>

    <div class="container">

        <h1 class="text-center">Δημιουργία controller, repositories και services για την εισαγωγή προϊόντων</h1>

        <section class="intro">
            <p>Θα δημιουργήσουμε τις απαραίτητες κλάσεις-components, για την εισαγωγή προϊόντων.</p>
        </section>

        <section class="category-components">

            <h5>Category Components</h5>

            <p>Θα δημιουργήσουμε ένα package springeshop.repositories. Μέσα σε αυτό θα δημιουργήσουμε ένα repository CategoryRepository.
                Το Spring Data JPA παρέχει για εμάς την υλοποίηση της μεθόδου findByName(String name). Θα πραγματοποίησει το ερώτημα JPQL
                "Select c from Category c where name = :name".
            </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.repositories;

                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Repository</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> CategoryRepository  extends JpaRepository&#60;Category, Integer&#62;  {

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Category findById(int id);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Category findByName(String name);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p>Δημιουργούμε το interface CategoryService στο springeshop.service. Περιέχει CRUD μεθόδους και μια μέθοδο, για την εύρεση προϊόντος,
                σύμφωνα με το όνομα.
            </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> CategoryService{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Category findById(int id);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Category findByName(String name);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;void saveCategory(Category category);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;void updateCategory(Category category);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;void deleteCategoryById(int id);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean doesCategoryExist(Category category);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p>Δημιουργούμε την υλοποίηση του, CategoryServiceImpl</p>

            <pre>
                <code>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Service</span>(<span class="string">"categoryService"</span>)
                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Transactional</span>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> CategoryServiceImpl <span class="keyword">implements</span> CategoryService{

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> CategoryRepository categoryRepository;;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> Category findById(int id) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> categoryRepository.findById(id);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> Category findByName(String name) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> categoryRepository.findByName(name);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> void saveCategory(Category category) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;categoryRepository.save(category);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> void updateCategory(Category category) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;saveCategory(category);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> void deleteCategoryById(int id) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;categoryRepository.deleteById(id);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> boolean doesCategoryExist(Category category) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> findByName(category.getName()) != null;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        }
                </code>
            </pre>
        </section>

        <section class="brand-components">

            <h5>Brand Components</h5>

            <p>Δημιουργούμε ένα repository BrandRepository. </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.repositories;

                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Repository</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> BrandRepository  extends JpaRepository&#60;Brand, Integer&#62;  {

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Brand findByName(String name);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p>Δημιουργούμε το interface BrandService στο springeshop.service.
            </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> BrandService{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Brand findByName(String name);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;void saveBrand(Brand brand);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean doesBrandExist(Brand brand);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p>Δημιουργούμε την υλοποίηση του, BrandServiceImpl</p>

            <pre>
                <code>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Service</span>(<span class="string">"brandService"</span>)
                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Transactional</span>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> BrandServiceImpl <span class="keyword">implements</span> BrandService{

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> BrandRepository brandRepository;;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> Brand findByName(String name) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> brandRepository.findByName(name);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> void saveBrand(Brand brand) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;brandRepository.save(brand);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> boolean doesBrandExist(Brand brand) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> findByName(brand.getName()) != null;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}
                        }
                </code>
            </pre>
        </section>

        <section class="inventory-components">

            <h5>Inventory Components</h5>

            <p>Δημιουργούμε ένα repository InventoryRepository. </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.repositories;

                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Repository</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> InventoryRepository  extends JpaRepository&#60;Inventory, Integer&#62;  {

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Query</span>(<span class="string">"select invent.quantity from Inventory invent where invent.product.id = :productid"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;int findProductQuantity(@Param(<span class="string">"productid"</span>) int productid);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p>Δημιουργούμε το interface InventoryService στο springeshop.service.
            </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> InventoryService{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;int findProductQuantity(int productid);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;void saveProductQuantity(Inventory productInventory);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p>Δημιουργούμε την υλοποίηση του, InventoryServiceImpl</p>

            <pre>
                <code>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Service</span>(<span class="string">"inventoryService"</span>)
                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Transactional</span>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> InventoryServiceImpl <span class="keyword">implements</span> InventoryService{

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> InventoryRepository inventoryRepository;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> int findProductQuantity(int productid) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> inventoryRepository.findProductQuantity(productid);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override(</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> void saveProductQuantity(Inventory productInventory) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;inventoryRepository.save(productInventory);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}
                        }
                </code>
            </pre>
        </section>

    </div>

  </body>
</html>
