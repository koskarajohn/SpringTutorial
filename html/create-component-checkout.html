<!DOCTYPE html>
<html>
  <head>
    <title>Angular - checkout-page component</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/index.css">
    
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
  </head>

  <body>

     <nav class="navbar navbar-expand-md fixed-top" id="mainNav">

        <div class="container">
            <a class="navbar-brand" href="../index.html">SpringTutorial</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false">
                <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ml-5">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarSpring" data-toggle="dropdown">Spring</a>
                    <ul class="dropdown-menu">
                        <li> <a class="dropdown-item" href="spring.html">What is Spring</a> </li>  
                        <li><a class="dropdown-item" href="spring-container.html">Spring IoC Container</a>  </li>  
                        <li>  <a class="dropdown-item" href="spring-beans.html">Spring Beans</a> </li> 
                        <li> <a class="dropdown-item" href="dependency-injection.html">Dependency Injection</a>  </li> 
                        <li> <a class="dropdown-item" href="annotations.html">Annotations</a> </li>  
                        <li> <a class="dropdown-item" href="spring-boot.html">Spring Boot</a> </li>  
                        <li> <a class="dropdown-item" href="spring-mvc.html">Spring Mvc</a> </li>  
                        <li>  <a class="dropdown-item" href="spring-security.html">Spring Security</a> </li> 
                        <li> <a class="dropdown-item" href="rest-api.html">Rest API</a>  </li> 
                        <li><a class="dropdown-item" href="application-properties.html">Application Properties</a>  </li>  
                    </ul>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarJpa" data-toggle="dropdown">JPA</a>
                  <ul class="dropdown-menu">
                       <li> <a class="dropdown-item" href="jpa.html">JPA</a> </li>       
                       <li>  <a class="dropdown-item" href="spring-data-jpa.html">Spring Data Jpa</a> </li>      
                  </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarSetup" data-toggle="dropdown">Setup εφαρμογης</a>
                    <ul class="dropdown-menu">
                      <li> <a class="dropdown-item" href="app-architecture.html">Αρχιτεκτονική εφαρμογής</a> </li>        
                      <li>  <a class="dropdown-item" href="spring-tool-suite.html">Spring Tool Suite</a> </li>       
                      <li> <a class="dropdown-item" href="heroku.html">Heroku</a>  </li>       
                      <li>  <a class="dropdown-item" href="postgresql.html">Postgres</a> </li>       
                      <li> <a class="dropdown-item" href="amazon-s3.html">Amazon S3</a> </li>        
                      <li>  <a class="dropdown-item" href="angular.html">Angular</a> </li>      
                      <li> <a class="dropdown-item" href="create-frontend.html">Δημιουργία Frontend</a>   </li>      
                      <li>  <a class="dropdown-item" href="visual-studio-code.html">Visual Studio Code</a> </li>      
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarCreateApp" data-toggle="dropdown">Κώδικας εφαρμογης</a>
                    <ul class="dropdown-menu">
                        <li class="nav-item dropleft submenu">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarSpring" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Spring</a>
                            <ul class="dropdown-menu">
                                <li> <a class="dropdown-item" href="jpa-configuration.html">Ρύθμιση βάσης δεδομένων και JPA</a> </li>  
                                <li>  <a class="dropdown-item" href="amazons3-configuration.html">Ρύθμιση Amazon S3</a> </li>     
                                <li>  <a class="dropdown-item" href="upload-images.html">Ανέβασμα εικόνων στο Amazon S3</a> </li>   
                                <li>  <a class="dropdown-item" href="create-tables-for-products.html">Δημιουργία πινάκων products, categories, brands, product_images, inventory</a> </li>    
                               <li> <a class="dropdown-item" href="create-components-products.html">Δημιουργία repositories, services για τους πίνακες brands, categories...</a> </li>      
                               <li> <a class="dropdown-item" href="insert-products.html">Δημιουργία controller,repository, service για την εισαγωγή προϊόντων</a> </li>     
                                <li>  <a class="dropdown-item" href="create-tables-deals.html">Δημιουργία πινάκων deals, deal_images</a> </li>    
                               <li> <a class="dropdown-item" href="create-components-deals.html">Δημιουργία controller,repository, service για την ανάκτηση προσφορών</a> </li>  
                            </ul>
                        </li>
                       
                        <li class="nav-item dropleft submenu">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarAngular" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Spring - Angular</a>
                            <ul class="dropdown-menu">
                               <li> <a class="dropdown-item" href="angular-routes.html">Angular - Routes</a> </li>     
                               <li>  <a class="dropdown-item" href="create-common-components.html">Angular - Components my-footer, shop-services, navigation-bar και product</a> </li>     
                               <li>  <a class="dropdown-item" href="create-index-page.html">Angular - index-page</a> </li>    
                               <li> <a class="dropdown-item" href="create-component-product-page.html">Angular - product-page</a> </li>      
                               <li>  <a class="dropdown-item" href="create-component-category.html">Angular - category-page</a> </li>    
                               <li>  <a class="dropdown-item" href="create-component-sidebar.html">Angular - category-sidebar</a> </li>     
                              <li>    <a class="dropdown-item" href="refresh-category-products.html">Angular - ανανέωση προϊόντων κατηγορίας</a></li>   
                              <li>  <a class="dropdown-item" href="spring-security-and-session.html">Spring Security - Spring Session</a> </li>    
                              <li><a class="dropdown-item" href="create-component-register.html">Angular - register-page component</a>  </li>     
                              <li> <a class="dropdown-item" href="create-component-login.html">Angular - login-page, navigation-bar components (είσοδος και αποσύνδεση)</a>  </li>
                              <li> <a class="dropdown-item" href="create-components-cart.html">Angular - cart-page component</a>  </li>
                              <li> <a class="dropdown-item" href="create-component-checkout.html">Angular - checkout-page component</a>  </li>
                              <li> <a class="dropdown-item" href="create-component-order.html">Angular - order-page component</a>  </li>
                              <li> <a class="dropdown-item" href="spring-email.html">Spring Email - αποστολή E-mail</a>  </li>
                              <li> <a class="dropdown-item" href="create-component-search.html">Angular - search-page</a>  </li>
                              <li> <a class="dropdown-item" href="create-component-search-sidebar.html">Angular - search-sidebar</a>  </li>
                            </ul>
                        </li>  
                    </ul>
                </li>

            </ul>
        </div>
      </div>
   
    </nav>

    <div class="container">

        <h1 class="text-center">Angular - checkout-page component</h1>

        <section class="intro">
            <p>Θα δημιουργήσουμε το Angular checkout-page component, στο οποίο ο χρήστης θα συμπληρώνει τα στοιχεία του και
                θα ολοκληρώνει την παραγγελία του.
            </p>
          
        </section>

        <section class="spring-boot">
            <h5>Spring Boot</h5>

            <p>Αρχικά, θα δημιουργήσουμε τέσσερις πίνακες : billing_info, shipping_info, order και order_products</p>

            <p>Δημιουργούμε τον πίνακα billing_info, o οποίος θα περιέχει τα στοιχεία χρέωσης της παραγγελίας.</p>

            <img class="img-fluid mx-auto my-5" src="../img/billing-info.PNG" alt="Billing Info">

            <p>Δημιουργούμε το entity BillingInfo στο springeshop.model</p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Entity</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Table(</span>name = <span class="string">"billing_info"</span>)
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> BillingInfo{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Id</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(</span>name = <span class="string">"id"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private int</span> id;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"first_name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide first name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Size(</span>min = 3, max = 200, message = <span class="string">"First Name must be between 3 and 200 characters"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> first_name;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"last_name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide last name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Size(</span>min = 3, max = 200, message = <span class="string">"Last Name must be between 3 and 200 characters"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> last_name;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"street"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide street name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Size(</span>min = 3, max = 200, message = <span class="string">"street must be between 3 and 200 characters"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> street;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"post_code"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide post code"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> post_code;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"city"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide city"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Size(</span>min = 3, max = 200, message = <span class="string">"City must be between 3 and 200 characters"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> city;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"phone"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide phone"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> phone;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"method"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide method"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> method;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> BillingInfo() {}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">//Getters - Setters ...</span>

                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε τον πίνακα shipping_info, ο οποίος περιέχει τα στοιχεία αποστολής της παραγγελίας και το entity ShippingInfo στο springeshop.model</p>

            <img class="img-fluid mx-auto my-5" src="../img/shipping-info-table.PNG" alt="ShippingInfo">   

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Entity</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Table(</span>name = <span class="string">"shipping_info"</span>)
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> ShippingInfo{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Id</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(</span>name = <span class="string">"id"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private int</span> id;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"first_name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide first name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Size(</span>min = 3, max = 200, message = <span class="string">"First Name must be between 3 and 200 characters"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> first_name;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"last_name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide last name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Size(</span>min = 3, max = 200, message = <span class="string">"Last Name must be between 3 and 200 characters"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> last_name;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"street"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide street name"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Size(</span>min = 3, max = 200, message = <span class="string">"street must be between 3 and 200 characters"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> street;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"post_code"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide post code"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> post_code;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"city"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide city"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Size(</span>min = 3, max = 200, message = <span class="string">"City must be between 3 and 200 characters"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> city;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"phone"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide phone"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> phone;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"method"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide method"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> method;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> ShippingInfo() {}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">//Getters - Setters ...</span>

                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε τον πίνακα orders, ο οποίος περιέχει τις παραγγελίες και το entity Order στο springeshop.model</p>

            <img class="img-fluid mx-auto my-5" src="../img/orders.png" alt="Order">   

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Entity</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Table(</span>name = <span class="string">"orders"</span>)
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> Order{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Id</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(</span>name = <span class="string">"id"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private int</span> id;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@OneToOne</span>(fetch = FetchType.LAZY)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@JoinColumn(</span>name = <span class="string">"user_id"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private User</span> user;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"email"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide email"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Email</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> email;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"status"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide status"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> status;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"order_date"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private Timestamp</span> order_date;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"payment_date"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private Timestamp</span> payment_date;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"shipping_date"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private Timestamp</span> shipping_date;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@OneToOne</span>(fetch = FetchType.LAZY)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@JoinColumn(</span>name = <span class="string">"shipping_info_id"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private ShippingInfo</span> shippingInfo;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@OneToOne</span>(fetch = FetchType.LAZY)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@JoinColumn(</span>name = <span class="string">"billing_info_id"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private BillingInfo</span> billingInfo;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> Order() {}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">//Getters - Setters ...</span>

                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε τον πίνακα order_products, ο οποίος περιέχει τα προιόντα της κάθε παραγγελίας,
                    το σύνθετο πρωτεύον κλειδί OrderProductPrimaryKey και το entity OrderProduct στο springeshop.model</p>

            <img class="img-fluid mx-auto my-5" src="../img/order_products.png" alt="Order Products">   

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Embeddable</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> OrderProductPrimaryKey implements Serializable{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private int</span> orderId;
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private int</span> productId;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> OrderProductPrimaryKey() {}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">//Getters - Setters ...</span>

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> boolean equals(Object o) {
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if (this == o) <span class="keyword">return</span> true;
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if (!(o instanceof OrderProductPrimaryKey)) <span class="keyword">return</span> false;
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;OrderProductPrimaryKey that = (OrderProductPrimaryKey) o;
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> Objects.equals(getOrderId(), that.getOrderId()) && Objects.equals(getProductId(), that.getProductId());
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> int hashCode() {
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> Objects.hash(getOrderId(), getProductId());  
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Entity</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Table(</span>name = <span class="string">"order_products"</span>)
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> OrderProduct{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@EmbeddedId</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private OrderProductPrimaryKey</span> id;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@OneToOne</span>(fetch = FetchType.LAZY)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@MapsId</span>(<span class="string">"orderId"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private Order</span> order;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@OneToOne</span>(fetch = FetchType.LAZY)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@MapsId</span>(<span class="string">"productId"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private Product</span>  product;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Column(name = </span><span class="string">"quantity"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@NotNull(</span>message = <span class="string">"Please provide quantity"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private int</span>  quantity;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> OrderProduct() {}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">//Getters - Setters ...</span>

                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε το OrderDetails στο springeshop.model</p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> OrderDetails{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Email</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private String</span> email;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Valid</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private ShippingInfo</span> shipping_info ;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Valid</span>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private BillingInfo</span> billing_info;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private boolean</span> isBillingAddressSameWithShippingAddress;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private List&#60;CartProduct&#62;</span> cartProducts;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> OrderDetails() {}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">//Getters - Setters ...</span>

                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε τα repositories BillingInfoRepository, ShippingInfoRepository. </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.repositories;

                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Repository</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> BillingInfoRepository  extends JpaRepository&#60;BillingInfo, Integer&#62;  {

                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.repositories;

                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Repository</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> ShippingInfoRepository  extends JpaRepository&#60;ShippingInfo, Integer&#62;  {

                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε τα BillingInfoService, ShippingInfoService, BillingInfoServiceImpl, ShippingInfoServiceImplστο springeshop.service . </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> BillingInfoService{
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean saveBillingInfoAndIsSuccess(BillingInfo billingInfo);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> ShippingInfoService{
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean saveShippingInfoAndIsSuccess(ShippingInfo shippingInfo);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <pre>
                <code>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Service</span>(<span class="string">"billingInfoService"</span>)
                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Transactional</span>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> BillingInfoServiceImpl <span class="keyword">implements</span> BillingInfoService{

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> BillingInfoRepository billingInfoRepository;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> boolean saveBillingInfoAndIsSuccess(BillingInfo billingInfo) {
                         &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean isSuccess = false;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;try {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;billingInfoRepository.save(billingInfo);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;isSuccess = true;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} catch (DataAccessException exception) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;System.out.println(exception);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;isSuccess = false;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} 

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> isSuccess;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        }
                </code>
            </pre>

            <pre>
                <code>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Service</span>(<span class="string">"shippingInfoService"</span>)
                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Transactional</span>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> ShippingInfoServiceImpl <span class="keyword">implements</span> ShippingInfoService{

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> ShippingInfoRepository shippingInfoRepository;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> boolean saveShippingInfoAndIsSuccess(ShippingInfo shippingInfo) {
                         &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean isSuccess = false;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;try {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;shippingInfoRepository.save(shippingInfo);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;isSuccess = true;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} catch (DataAccessException exception) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;System.out.println(exception);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;isSuccess = false;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} 

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> isSuccess;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        }
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε τα repositories OrderRepository, OrderProductRepository. </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.repositories;

                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Repository</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> OrderRepository  extends JpaRepository&#60;Order, Integer&#62;  {

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Query</span>(<span class="string">"select order from Order order where order.user.id = :userid"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;List&#60;Order&#62; findUserOrders(@Param("userid") int userid);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.repositories;

                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Repository</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> OrderProductRepository  extends JpaRepository&#60;OrderProduct, Integer&#62;  {

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Query</span>(<span class="string">"select prod from OrderProduct prod where prod.order.id = :orderid"</span>)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;List&#60;Product&#62; findOrderProducts(@Param("orderid") int orderid);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε τα OrderService, OrderProductService, OrderServiceImpl, OrderProductServiceImpl στο springeshop.service . </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> OrderService{
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean saveOrderAndIsSuccess(Order order);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;List&#60;Order&#62; findUserOrders(int userid);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public interface</span> OrderProductService{
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;void saveOrderProduct(OrderProduct orderProduct);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean saveOrderProducts(List&#60;OrderProduct&#62; orderProducts);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;List&#60;Product&#62; findOrderProducts(int orderid);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

            <pre>
                <code>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Service</span>(<span class="string">"orderService"</span>)
                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Transactional</span>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> OrderServiceImpl <span class="keyword">implements</span> OrderService{

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> OrderRepository orderRepository;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> boolean saveOrderAndIsSuccess(Order order) {
                         &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean isSuccess = false;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;try {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;orderRepository.save(order);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;isSuccess = true;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} catch (DataAccessException exception) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;System.out.println(exception);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;isSuccess = false;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} 

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> isSuccess;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> List&#60;Order&#62; findUserOrders(int userid);
                         &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;return orderRepository.findUserOrders(userid);
                         &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        }
                </code>
            </pre>

            <pre>
                <code>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.service;

                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Service</span>(<span class="string">"orderProductService"</span>)
                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Transactional</span>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> OrderProductServiceImpl <span class="keyword">implements</span> OrderProductService{

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> OrderProductRepository orderProductRepository;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> void saveOrderProduct(OrderProduct orderProduct) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;orderProductRepository.save(orderProduct);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> List&#60;Product&#62; findOrderProducts(int orderid) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;return orderProductRepository.findOrderProducts(orderid);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> boolean saveOrderProducts(List&#60;OrderProduct&#62; orderProducts) {
                         &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean isSuccess = false;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;try {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;orderProductRepository.saveAll(orderProducts);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;isSuccess = true;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} catch (DataAccessException exception) {
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;System.out.println(exception);
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;isSuccess = false;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} 

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> isSuccess;
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                        }
                </code>
            </pre>

            <p class="mt-5">Δημιουργούμε τoν OrderApiController στο πακέτο springeshop.controller</p>

            <pre>
                <code>
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">package</span> springeshop.controller;

                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@RestController</span>
                        &emsp;&emsp;&emsp;&emsp;<span class="annotation">@RequestMapping</span>(<span class="string">"/api"</span>)
                        &emsp;&emsp;&emsp;&emsp;<span class="keyword">public class</span> CartApiController{
                        
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> OrderService orderService;
    
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> OrderProductService orderProductService;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> ProductService productService;
    
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> UserService userService;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> ShippingInfoService shippingInfoService;
    
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> BillingInfoService billingInfoService;

                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@Autowired</span>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">private </span> BillingInfoService billingInfoService;
                        
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;...
                </code>
            </pre>

            <p class="mt-5">Προσθέτουμε τη μέθοδο createOrder() στον OrderApiController, με την οποία προσθέτουμε μια παραγγελία.
                O client στέλνει ένα OrderDetails αντικείμενο, που περιέχει το καλάθι, το email του χρήστης, τις πληροφορίες χρέωσης και αποστολής. 
                Προσθέτουμε την παραγγελία και τα προϊόντα στους πίνακες και στέλνουμε ένα email με τα στοιχεία της παραγγελίας στο χρήστη.
            </p>
            
            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@RequestMapping(</span>value = <span class="string">"/orders"</span>, method = RequestMethod.POST)
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">public</span> ResponseEntity&#60;?&#62; createCartProduct(<span class="annotation">@Valid @RequestBody(</span>) OrderDetails orderDetails{

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;boolean isAnonymous = principal == null ? true : false;

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if(isAnonymous && orderDetails.getEmail() == null){
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return new</span> ResponseEntity&#60;&#62;(new ErrorMessage(<span class="string">"Email was not provided"</span> , HttpStatus.BAD_REQUEST);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if(shippingInfoService.saveShippingInfoAndIsSuccess(orderDetails.getShipping_info()) && 
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;billingInfoService.saveBillingInfoAndIsSuccess(orderDetails.getBilling_info())){

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Order order = new Order();

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if(!isAnonymous){
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;User user = userService.findByUsername(principal.getName());
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;order.setUser(user);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}
                    
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;order.setEmail(orderDetails.getEmail());
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;order.setStatus("Created");
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Timestamp currentDate = new Timestamp(System.currentTimeMillis());
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;order.setOrder_date(currentDate);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;order.setShippingInfo(orderDetails.getShipping_info());
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;order.setBillingInfo(orderDetails.getBilling_info());

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if(orderService.saveOrderAndIsSuccess(order)){

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;List&#60;OrderProduct&#62; orderProducts = new ArrayList&#60;&#62;();
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;for(CartProduct cartProduct : orderDetails.getCartProducts()){
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;OrderProduct orderProduct = new OrderProduct();
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;OrderProductPrimaryKey id = new OrderProductPrimaryKey(order.getId(), cartProduct.getProductid());
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;orderProduct.setId(id);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;orderProduct.setOrder(order);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;orderProduct.setProduct(productService.findById(cartProduct.getProductid()));
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;orderProduct.setQuantity(cartProduct.getQuantity());
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;orderProducts.add(orderProduct);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if(orderProductService.saveOrderProducts(orderProducts)){
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;emailService.sendEmail(order, orderDetails.getCartProducts());
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return new</span> ResponseEntity&#60;Order&#62;(order, HttpStatus.CREATED);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}  

                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return new</span> ResponseEntity&#60;&#62;(HttpStatus.INTERNAL_SERVER_ERROR);
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}               
                </code>
            </pre>

        <section class="angular">

            <h5>Angular</h5>

            <p>Δημιουργούμε το component checkout-page και το service checkout.</p>
                
            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;ng generate component checkout-page
                </code>
            </pre>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;ng generate service checkout
                </code>
            </pre>

            <p>Δημιουργούμε τις κλάσεις BillingInfo, ShippingInfo, Order, OrderDetails</p>

            <img class="img-fluid mx-auto my-5" src="../img/billinginfo-ts.PNG" alt="BillingInfo">

            <img class="img-fluid mx-auto my-5" src="../img/shipping-info-ts.PNG" alt="Shipping">

            <img class="img-fluid mx-auto my-5" src="../img/order-ts.PNG" alt="Order">

            <img class="img-fluid mx-auto my-5" src="../img/order-details-ts.PNG" alt="Order Details">

            <p>checkout.service.ts</p>

            <img class="img-fluid mx-auto my-5" src="../img/checkout-service.PNG" alt="Checkout Service">

            <p>Όταν ο χρήστης πατήσει το κουμπί Ολοκλήρωση αγοράς, καλείται η μέθοδος onSubmit(), η οποία καλεί τη μέθοδο
                addOrder(), ώστε να καταχωρηθεί η παραγγελία στο Server.
            </p>

            <p>checkout-page.component.ts</p>

            <img class="img-fluid mx-auto my-5" src="../img/checkout-component-ts.PNG" alt="Checkout Page Ts">

            <p>checkout-page.component.html</p>

            <img class="img-fluid mx-auto my-5" src="../img/checkout-component-html.PNG" alt="Checkout Page Html">

            <p>checkout-page.component.css</p>

            <img class="img-fluid mx-auto my-5" src="../img/checkout-component-css.PNG" alt="Checkout Page Css">

            <p class="font-weight-bold">Εμφάνιση σελίδας</p>

            <img class="img-fluid mx-auto my-5" src="../img/checkout-appearance-1.PNG" alt="Cart Page Appearnce">

            <img class="img-fluid mx-auto my-5" src="../img/checkout-appearance-2.PNG" alt="Checkout Page Appearnce">
      
        </section>
    </div>

  </body>
</html>