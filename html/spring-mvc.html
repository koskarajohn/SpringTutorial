<!DOCTYPE html>
<html>
  <head>
    <title>Spring MVC</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/index.css">
    
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
  </head>

  <body>

     <nav class="navbar navbar-expand-md fixed-top" id="mainNav">

        <div class="container">
            <a class="navbar-brand" href="../index.html">SpringTutorial</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false">
                <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ml-5">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarSpring" data-toggle="dropdown">Spring</a>
                    <ul class="dropdown-menu">
                        <li> <a class="dropdown-item" href="spring.html">What is Spring</a> </li>  
                        <li><a class="dropdown-item" href="spring-container.html">Spring IoC Container</a>  </li>  
                        <li>  <a class="dropdown-item" href="spring-beans.html">Spring Beans</a> </li> 
                        <li> <a class="dropdown-item" href="dependency-injection.html">Dependency Injection</a>  </li> 
                        <li> <a class="dropdown-item" href="annotations.html">Annotations</a> </li>  
                        <li> <a class="dropdown-item" href="spring-boot.html">Spring Boot</a> </li>  
                        <li> <a class="dropdown-item" href="spring-mvc.html">Spring Mvc</a> </li>  
                        <li>  <a class="dropdown-item" href="spring-security.html">Spring Security</a> </li> 
                        <li> <a class="dropdown-item" href="rest-api.html">Rest API</a>  </li> 
                        <li><a class="dropdown-item" href="application-properties.html">Application Properties</a>  </li>  
                    </ul>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarJpa" data-toggle="dropdown">JPA</a>
                  <ul class="dropdown-menu">
                       <li> <a class="dropdown-item" href="jpa.html">JPA</a> </li>       
                       <li>  <a class="dropdown-item" href="spring-data-jpa.html">Spring Data Jpa</a> </li>      
                  </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarSetup" data-toggle="dropdown">Setup εφαρμογης</a>
                    <ul class="dropdown-menu">
                      <li> <a class="dropdown-item" href="app-architecture.html">Αρχιτεκτονική εφαρμογής</a> </li>        
                      <li>  <a class="dropdown-item" href="spring-tool-suite.html">Spring Tool Suite</a> </li>       
                      <li> <a class="dropdown-item" href="heroku.html">Heroku</a>  </li>       
                      <li>  <a class="dropdown-item" href="postgresql.html">Postgres</a> </li>       
                      <li> <a class="dropdown-item" href="amazon-s3.html">Amazon S3</a> </li>        
                      <li>  <a class="dropdown-item" href="angular.html">Angular</a> </li>      
                      <li> <a class="dropdown-item" href="create-frontend.html">Δημιουργία Frontend</a>   </li>      
                      <li>  <a class="dropdown-item" href="visual-studio-code.html">Visual Studio Code</a> </li>      
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarCreateApp" data-toggle="dropdown">Κώδικας εφαρμογης</a>
                    <ul class="dropdown-menu">
                        <li class="nav-item dropleft submenu">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarSpring" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Spring</a>
                            <ul class="dropdown-menu">
                                <li> <a class="dropdown-item" href="jpa-configuration.html">Ρύθμιση βάσης δεδομένων και JPA</a> </li>  
                                <li>  <a class="dropdown-item" href="amazons3-configuration.html">Ρύθμιση Amazon S3</a> </li>     
                                <li>  <a class="dropdown-item" href="upload-images.html">Ανέβασμα εικόνων στο Amazon S3</a> </li>   
                                <li>  <a class="dropdown-item" href="create-tables-for-products.html">Δημιουργία πινάκων products, categories, brands, product_images, inventory</a> </li>    
                               <li> <a class="dropdown-item" href="create-components-products.html">Δημιουργία repositories, services για τους πίνακες brands, categories...</a> </li>      
                               <li> <a class="dropdown-item" href="insert-products.html">Δημιουργία controller,repository, service για την εισαγωγή προϊόντων</a> </li>     
                                <li>  <a class="dropdown-item" href="create-tables-deals.html">Δημιουργία πινάκων deals, deal_images</a> </li>    
                               <li> <a class="dropdown-item" href="create-components-deals.html">Δημιουργία controller,repository, service για την ανάκτηση προσφορών</a> </li>  
                            </ul>
                        </li>
                       
                        <li class="nav-item dropleft submenu">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarAngular" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Spring - Angular</a>
                            <ul class="dropdown-menu">
                               <li> <a class="dropdown-item" href="angular-routes.html">Angular - Routes</a> </li>     
                               <li>  <a class="dropdown-item" href="create-common-components.html">Angular - Components my-footer, shop-services, navigation-bar και product</a> </li>     
                               <li>  <a class="dropdown-item" href="create-index-page.html">Angular - index-page</a> </li>    
                               <li> <a class="dropdown-item" href="create-component-product-page.html">Angular - product-page</a> </li>      
                               <li>  <a class="dropdown-item" href="create-component-category.html">Angular - category-page</a> </li>    
                               <li>  <a class="dropdown-item" href="create-component-sidebar.html">Angular - category-sidebar</a> </li>     
                              <li>    <a class="dropdown-item" href="refresh-category-products.html">Angular - ανανέωση προϊόντων κατηγορίας</a></li>   
                              <li>  <a class="dropdown-item" href="spring-security-and-session.html">Spring Security - Spring Session</a> </li>    
                              <li><a class="dropdown-item" href="create-component-register.html">Angular - register-page component</a>  </li>     
                              <li> <a class="dropdown-item" href="create-component-login.html">Angular - login-page, navigation-bar components (είσοδος και αποσύνδεση)</a>  </li>
                              <li> <a class="dropdown-item" href="create-components-cart.html">Angular - cart-page component</a>  </li>
                              <li> <a class="dropdown-item" href="create-component-checkout.html">Angular - checkout-page component</a>  </li>
                              <li> <a class="dropdown-item" href="create-component-order.html">Angular - order-page component</a>  </li>
                              <li> <a class="dropdown-item" href="spring-email.html">Spring Email - αποστολή E-mail</a>  </li>
                              <li> <a class="dropdown-item" href="create-component-search.html">Angular - search-page</a>  </li>
                              <li> <a class="dropdown-item" href="create-component-search-sidebar.html">Angular - search-sidebar</a>  </li>
                            </ul>
                        </li>  
                    </ul>
                </li>

            </ul>
        </div>
      </div>
   
    </nav>

    <div class="container">

        <h1 class="text-center">Spring MVC</h1>

        <section class="intro">

            <p>To Spring Web MVC framework παρέχει το μοντέλο αρχιτεκτονικής <span class="bold">Model-View-Controller(MVC)</span> και έτοιμα components, ώστε
                να δημιουργήσουμε ευέλικτες και με χαμηλή σύζευξη εφαρμογές. To MVC pattern <span class="bold">διαχωρίζει τα διάφορα κομμάτια της εφαρμογής</span> 
                (input logic, business logic και UI logic) και παρέχει <span class="bold">χαμηλή σύζευξη</span> μεταξύ αυτών των στοιχείων.</p>

            <ul>
                <li>Το <span class="bold">Model</span> ενθυλακώνει τα <span class="bold">δεδομένα της εφαρμογής</span> και γενικά αποτελείται από τα <span class="bold">POJOs</span>.</li>
                <li>Το <span class="bold">View</span> είναι υπεύθυνο για την <span class="bold">εμφανίση των δεδομένων του Model</span> και γενικά το τελικό προιόν που παράγει, είναι HTML, 
                    την οποία μπορεί, να μεταφράσει ο browser του client.
                </li>
                <li>Ο <span class="bold">Controller</span> είναι υπεύθυνος για την <span class="bold">διαχείριση των αιτημάτων</span> του χρήστη, 
                    την <span class="bold">δημιουργία του κατάλληλου Model</span>, το οποίο <span class="bold">περνάει στο View</span>, έτσι ώστε να το εμφανίσει.
                </li>
            </ul>

            <img class="img-fluid d-block mx-auto my-5" src="../img/mvc-diagram.png" alt="Mvc Diagram">
            
        </section>

        <section class="dispatcher-servlet">
            <h5>Dispatcher Servlet</h5>

            <p>Το Spring MVC, όπως και άλλα web frameworks, είναι σχεδιασμένο γύρω από το <span class="bold">front controller pattern</span>, όπου ένα κεντρικό Servlet
                , το <span class="bold">Dispatcher Servlet</span>, παρέχει έναν μοιραζόμενο αλγόριθμο για την επεξεργασία των αιτημάτων, ενώ η πραγματική δουλειά
                <span class="bold">ανατίθεται</span> και <span class="bold">πραγματοποιείται</span> απο ρυθμιζόμενα components.
            </p>

            <img class="img-fluid d-block mx-auto my-5" src="../img/dispatcher-servlet.png" alt="Dispatcher Servlet">

            <p>Όταν γίνεται ένα HTTP αίτημα στο <span class="highlight">DispatcherServlet</span>, πραγματοποιείται η εξής ακολουθία γεγονότων:</p>

            <ol>
                <li>Όταν λάβει ένα HTTP request, το <span class="highlight">DispatcherServlet</span> συμβουλεύεται το 
                    <span class="highlight">HandlerMapping</span>, για να καλέσει τον κατάλληλο <span class="highlight">Controller</span>.</li>
                <li>O <span class="highlight">Controller</span> παίρνει το αίτημα και καλεί την κατάλληλη μέθοδο, που θα το διαχειριστεί, ανάλογα με την HTTP μέθοδο. 
                    Η μέθοδος του <span class="highlight">Controller</span> θα δημιουργήσει τα δεδομένα του <span class="highlight">Model</span>, 
                    σύμφωνα με το business logic και θα επιστρέψει το όνομα του <span class="highlight">DispatcherServlet</span>View στο <span class="highlight">DispatcherServlet</span>.
                </li>
                <li>Το <span class="highlight">DispatcherServlet</span> περνάει το λογικό όνομα του <span class="highlight">View</span> στον <span class="highlight">ViewResolver</span> και 
                    αυτος επιστρέφει την πραγματική υλοποίηση του <span class="highlight">View</span>.
                </li>
                <li>
                    Το <span class="highlight">DispatcherServlet</span> περνάει τα δεδομένα στο <span class="highlight">View</span> και επιστρέφει την απάντηση στον browser του client.
                </li>
            </ol>

            <p>Για να δημιουργήσουμε το DispatcherServlet, χρειάζεται XML ή Java Configuration. Παρακάτω δίνεται το Java configuration.</p>

            <pre>
                <code>
                        <span class="keyword">public class</span> MyWebAppInitializer  <span class="keyword">extends</span> AbstractAnnotationConfigDispatcherServletInitializer {

                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> Class&#60;?&#62;[] getRootConfigClasses() {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> null;
                            &emsp;&emsp;&emsp;&emsp;}

                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> Class&#60;?&#62;[] getServletConfigClasses() {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return new</span> Class&#60;?&#62;[] { MyWebConfig.class };
                            &emsp;&emsp;&emsp;&emsp;}

                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> String[] getServletMappings() {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return new</span> String[] { <span class="string">"/"</span> };
                            &emsp;&emsp;&emsp;&emsp;}
                        }
                </code>
            </pre>

            <p>Εάν χρησιμοποιούμε Spring Boot, χρησιμοποιώντας το starter dependency <span class="highlight">spring-boot-starter-web</span>, το Spring Boot
            παρέχει το configuration και δημιουργεί το DispatcherServlet για εμάς.</p>
        </section>

        <section class="controllers">
            <h5>Annotated Controllers</h5>

            <p>Το Spring MVC παρέχει ένα <span class="bold">annotation-based</span> προγραμματιστικό μοντέλο, όπου τα <span class="code">@Controller</span> και <span class="code">@RestController</span> components, 
                χρησιμοποιούν annotations, για να δηλώσουν request mappings, request input, exception handling κ.α. Οι annotated controllers έχουν
                ευέλικτες υπογραφές μεθόδων και όυτε κάνουν <span class="code">extend</span> base κλάσεις, ούτε υλοποιούν συγκεκριμένες διεπαφές.
            </p>

            <p>Μπορούμε, να δηλώσουμε controller beans, χρησιμοποιώντας τον τυπικό τρόπο ορισμού των Spring beans, στο WebApplicationContext του Servlet.
                Το <span class="code">@Controller</span> stereotype καθιστά δυνατή, την εύρεση του controller bean από το μηχανισμό εύρεσης components του Spring και υποδεικνύει
                ότι είναι ένα web component. Το παρακάτω παράδειγμα δείχνει έναν controller, που ορίζεται με annotations;
            </p>

            <pre>
                <code>
                        <span class="annotation">@Controller</span>
                        <span class="keyword">public class</span> HelloController {

                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@Override</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> String handle (Model model) {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;model.addAttribute(<span class="string">"message"</span>, <span class="string">"Hello World!"</span>);
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> <span class="string">"index"</span>;
                            &emsp;&emsp;&emsp;&emsp;}

                        }
                </code>
            </pre>

            <p>Η μέθοδος δέχεται ένα Model και επιστρέφει ένα όνομα view ως String.</p>

            <p>Το <span class="code">@RestController</span> είναι ένα σύνθετο annotation, το οποίο περιέχει τα annotations <span class="code">@Controller</span> και 
                <span class="code">@ResponseBody</span> και υποδεικνύει έναν controller, του οποίου όλες οι μέθοδοι κληρονομούν το type-level 
                <span class="code">@ResponseBody</span> annotation, όποτε γράφουν κατευθείαν στο response body και δεν κάνουν render ένα HTML template.</p>
        </section>

        <section class="request-mapping">
            <h5>Request Mapping</h5>

            <p>Το annotation <span class="code">@RequestMapping</span> χρησιμοποιείται για την <span class="bold">αντιστοίχιση αιτημάτων με μεθόδους</span> του controller. Έχει διάφορα attributes,
                ώστε να πραγματοποιείται αντιστοίχιση σύμφωνα με την <span class="bold">HTTP μέθοδο</span>, τα <span class="bold">request parameters</span>, τα <span class="bold">headers</span> 
                και <span class="bold">media types</span>. Μπορεί να χρησιμοποιηθεί σε επίπεδο κλάσης, ώστε να εκφράσει μοιραζόμενες αντιστοιχίσεις ή σε επίπεδο μεθόδου, για να αντιστοιχιστεί με ένα συγκεκριμένο endpoint.
            </p>

            <p>Υπάρχουν επίσης συντομεύσεις του <span class="code">@RequestMapping</span>, ανάλογα με την HTTP μέθοδο :</p>

            <ul>
                <li><span class="code">@GetMapping</span></li> 
                <li><span class="code">@PostMapping</span></li> 
                <li><span class="code">@PutMapping</span></li> 
                <li><span class="code">@DeleteMapping</span></li> 
                <li><span class="code">@PatchMapping</span></li> 
            </ul>

            <p>Το επόμενο παράδειγμα έχει mapping επιπέδου τύπου και μεθόδου:</p>

            <pre>
                <code>
                        <span class="annotation">@RestController</span>
                        <span class="annotation">@RequestMapping(</span><span class="string">"/persons"</span>)
                        <span class="keyword">public class</span> PersonController {

                            &emsp;&emsp;&emsp;&emsp;<span class="comments">// GET /persons/11</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@RequestMapping(</span><span class="string">"/{id}"</span>)
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> Person getPerson (<span class="annotation">@PathVariable</span> Long id) {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">// ...</span>
                            &emsp;&emsp;&emsp;&emsp;}

                            &emsp;&emsp;&emsp;&emsp;<span class="comments">// POST /persons</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@PostMapping</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@ResponseStatus</span>(HttpStatus.CREATED)
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> void add (<span class="annotation">@RequestBody </span> Person person) {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">// ...</span>
                            &emsp;&emsp;&emsp;&emsp;}

                        }
                </code>
            </pre>
        </section>

        <section class="url-variable">
            <h5>URL Variables</h5>

            <p>Μπορούμε να δηλώσουμε URL variable και πάρουμε την τιμή τους με το annotation <span class="code">@PathVariable</span>. </p>

            <pre>
                <code>

                            &emsp;&emsp;&emsp;&emsp;<span class="comments">// GET /owners/11/pets/20</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@GetMapping(</span><span class="string">"/owners/{ownerId}/pets/{petId}"</span>)
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> Pet findPet (<span class="annotation">@PathVariable</span> Long ownerId, <span class="annotation">@PathVariable</span> Long petId) {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">// ownerId = 11</span>
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">// petId = 20</span>
                            &emsp;&emsp;&emsp;&emsp;}
                </code>
            </pre>
        </section>

        <section class="media-types">
            <h5>Consumable Media Types</h5>

            <p>Μπορούμε να ορίσουμε το <span class="code">Content-Type</span> του αιτήματος. </p>

            <pre>
                <code>

                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@PostMapping(</span> path = <span class="string">"/path"</span>, consumes  = <span class="string">"application/json"</span>)
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> void addPet (<span class="annotation">@RequestBody )</span> Pet pet{
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">// ...</span>
                            &emsp;&emsp;&emsp;&emsp;}
                </code>
            </pre>

            <h5 class="mt-5">Producible  Media Types</h5>

            <p>Μπορούμε να ορίσουμε το περιεχόμενο της απάντησης, ανάλογα με το <span class="code">Accept</span> header του αιτήματος. </p>

            <pre>
                <code>

                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@GetMapping(</span> path = <span class="string">"/pets/{petId}"</span>, produces   = <span class="string">"application/json;charset=UTF-8"</span>)
                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@ResponseBody</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> Pet getPet (<span class="annotation">@PathVariable  )</span> String petId{
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">// ...</span>
                            &emsp;&emsp;&emsp;&emsp;}
                </code>
            </pre>
        </section>

        <section class="request-param">
            <h5>@RequestParam</h5>

            <p>Με το annotation <span class="code">@RequestParam</span>, μπορούμε να κάνουμε bind τις παραμέτρους του αιτήματος του Servlet
            (τις παράμετρους του query ή δεδομένα της φόρμας) σε μια παραμέτρος μεθόδου ενός controller.</p>

            <pre>
                <code>
                        <span class="annotation">@Controller</span>
                        <span class="annotation">@RequestMapping(</span><span class="string">"/pets"</span>)
                        <span class="keyword">public class</span> EditPetForm  {

                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@GetMapping(</span>
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> String setupForm (<span class="annotation">@RequestParam(<span class="string">"petId"</span></span> int petId, Model model) {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Pet pet = <span class="this">this</span>.clinic.loadPet(petId);
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;model.addAttribute(<span class="string">"pet"</span>, pet);
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return</span> <span class="string">"petForm"</span>;
                            &emsp;&emsp;&emsp;&emsp;}

                        }
                </code>
            </pre>

            <p>Εξ' ορισμού, οι παράμετροι μεθόδων με το annotation αυτό είναι υποχρεωτικές, αλλα μπορούμε να τις κάνουμε προαιρετικές, 
                θέτοντας το required flag την τιμή false.
            </p>
        </section>

        <section class="multipart">
            <h5>Multipart</h5>

            <p>Αφού ενεργοποιηθεί το MultipartResolver, το περιεχόμενο των POST αιτημάτων με multipart/form-data (αρχεία, φωτογραφίες) γίνεται
                parse και είναι προσβάσιμο ως απλή παράμετρος αιτήματος.
            </p>

            <pre>
                <code>
                        <span class="annotation">@Controller</span>
                        <span class="keyword">public class</span> FileUploadController   {

                            &emsp;&emsp;&emsp;&emsp;<span class="annotation">@PostMapping(</span><span class="string">"/form"</span>)
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> String handleFormUpload (<span class="annotation">@RequestParam(<span class="string">"name"</span></span>) String name, 
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="annotation">@RequestParam(<span class="string">"file"</span></span>) MultipartFile file) {

                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">if </span>(!file.isEmpty()) {
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;byte[] bytes = file.getBytes();
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="comments">store the bytes somewhere</span>// 
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return </span> <span class="string">"redirect:uploadSuccess"</span>;
                            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}
                            &emsp;&emsp;&emsp;&emsp;<span class="keyword">return </span> <span class="string">"redirect:uploadFailure"</span>;
                            &emsp;&emsp;&emsp;&emsp;}
                        }
                </code>
            </pre>
        </section>

        <section class="request-body">
            <h5>@RequestBody</h5>

            <p>Μπορούμε να χρησιμοποιήσουμε το annotation <span class="code">@RequestBody</span>, ώστε να διαβαστεί το request body και να γίνει deserialize σε ένα
                Object μέσω του HttpMessageConverter. Εάν χρησιμοποιήσουμε και το annotation <span class="code">javax.validation.Valid</span>, τότε εφαρμόζεται
                Standard Bean Validation.
            </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@PostMapping(</span><span class="string">"/accounts"</span>)
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> void String handleFormUpload (<span class="annotation">@Valid</span> <span class="annotation">@RequestBody</span> Account account){
                    &emsp;&emsp;&emsp;&emsp;<span class="comments">// ...</span>
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

        </section>

        <section class="request-body">
            <h5>@ResponseBody</h5>

            <p>Μπορούμε να χρησιμοποιήσουμε το annotation <span class="code">@ResponseBody</span> σε μια μέθοδο, ώστε η απάντηση να γίνει deserialized στο response body
                μέσω του HttpMessageConverter.
            </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@GetMapping(</span><span class="string">"/accounts/{id}"</span>)
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@ResponseBody(</span>
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> Account handle (){
                    &emsp;&emsp;&emsp;&emsp;<span class="comments">// ...</span>
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

        </section>

        <section class="request-body">
            <h5>@ResponseEntity</h5>

            <p>Το annotation <span class="code">@ResponseEntity</span> είναι σαν το <span class="code">@ResponseBody</span>, αλλά μπορούμε να επιστρέψουμε status και headers.
            </p>

            <pre>
                <code>
                    &emsp;&emsp;&emsp;&emsp;<span class="annotation">@GetMapping(</span><span class="string">"/accounts/{id}"</span>)
                    &emsp;&emsp;&emsp;&emsp;<span class="keyword">public </span> ResponseEntity&#60;?&#62; getAccount (){
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Account account = ...; 
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class="keyword">return new</span> ResponseEntity&#60;Account&#62;( account, HttpStatus.BAD_REQUEST);
                    &emsp;&emsp;&emsp;&emsp;} 
                </code>
            </pre>

        </section>

        <section class="references">

            <h5>Πηγές</h5>

            <ul>
                <li><a href="https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm">tutorialspoint : Spring - MVC Framework</a></li>
                <li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-servlet">Spring Framework Documentation - Core - 1.1. DispatcherServlet</a></li>
                <li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-controller">Spring Framework Documentation - Core - 1.3. Annotated Controllers</a></li>
                <li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-requestmapping">Spring Framework Documentation - Core - 1.3.2. Request Mapping</a></li>
                <li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-methods">Spring Framework Documentation - Core - 1.3.3. Handler Methods</a></li>
            </ul>
        </section>
    </div>

  </body>
</html>
